(()=>{"use strict";const e=(e,t=[])=>{const i=e=>t.findIndex((t=>t.getTitle().toLowerCase()==e.toLowerCase()));return{title:e,items:t,getTitle:()=>e,getItems:()=>t,addItem:e=>{t.push(e)},deleteItem:e=>{const s=i(e);t.splice(s,1)},changeFinishedItem:e=>{let s=i(e);t[s].toggleFinished()}}},t=(e,t=!1)=>{const i={title:e,finished:t,getTitle:()=>i.title,toggleFinished:()=>i.finished=!i.finished};return i},i=(()=>{let i=e("Default List"),s=t("Brush Teeth"),l=t("Wash Face");i.addItem(s),i.addItem(l);let n=[];return n.push(i),{lists:n}})(),s=(()=>{function s(e){localStorage.setItem("lists",JSON.stringify(e))}const l=()=>{let s=localStorage.getItem("lists"),l=[];return s&&"[]"!==s?JSON.parse(s).forEach((i=>{let s=e(i.title);i.items.forEach((e=>{let i=t(e.title,e.finished);s.addItem(i)})),l.push(s)})):l=i.lists,l},n=(e,t)=>t.findIndex((t=>t.getTitle().toLowerCase()==e.toLowerCase()));return{getLists:l,addList:e=>{let t=l();t.push(e),s(t)},removeList:e=>{let t=l(),i=n(e,t);t.splice(i,1),s(t)},removeItem:(e,t)=>{let i=l();i[n(e,i)].deleteItem(t),s(i)},addItem:(e,i)=>{let d=t(i),r=l();r[n(e,r)].addItem(d),s(r)},changeFinishedItem:(e,t)=>{let i=l();i[n(e,i)].changeFinishedItem(t),s(i)},changeListTitle:(e,t)=>{let i=l(),n=i.findIndex((t=>t.getTitle().toLowerCase().replaceAll(/(\s|-)/gi,"")==e.toLowerCase().replaceAll("-","")));i[n].title=t,s(i)}}})(),l=()=>document.querySelector("main"),n=()=>document.querySelector("#form-new-list"),d=()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 30 30"),e.setAttribute("name","svg-check-mark");let t=document.createElementNS("http://www.w3.org/2000/svg","use");return t.setAttribute("href","#check-mark"),e.appendChild(t),e},r=()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 50 50"),e.setAttribute("name","svg-bin");let t=document.createElementNS("http://www.w3.org/2000/svg","use");return t.setAttribute("href","#bin"),e.appendChild(t),e},a=()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 16 16"),e.setAttribute("name","svg-edit");let t=document.createElementNS("http://www.w3.org/2000/svg","use");return t.setAttribute("href","#edit"),e.appendChild(t),e};(function(){const i=e=>{let t=document.createElement("div");t.classList.add("list-container");let i=document.createElement("div");i.classList.add("list-title");let n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("value",e.getTitle()),n.setAttribute("id",e.getTitle().toLowerCase().replaceAll(" ","-")),n.setAttribute("disabled",""),n.addEventListener("blur",(function(){this.setAttribute("disabled","");let e=this.getAttribute("id"),t=this.value;s.changeListTitle(e,t),this.setAttribute("id",t.toLowerCase().replaceAll(" ","-"))})),i.appendChild(n);let d=a();d.addEventListener("click",u),i.appendChild(d);let c=r();c.addEventListener("click",p),i.appendChild(c);let m=document.createElement("ul");m.classList.add("list"),e.getItems()&&e.getItems().forEach((e=>{let t=o(e);m.appendChild(t)})),i.addEventListener("click",(function(){null!==this.firstChild.getAttribute("disabled")&&this.parentNode.lastChild.classList.toggle("invisible")}));let g=document.createElement("form"),f=document.createElement("input");f.setAttribute("type","text"),f.setAttribute("placeholder","New item..."),f.classList.add("new-list-item"),g.appendChild(f),g.addEventListener("submit",h);let v=document.createElement("li");v.appendChild(g),m.appendChild(v),t.appendChild(i),t.appendChild(m),l().appendChild(t)},o=e=>{let t=document.createElement("li"),i=document.createElement("span");i.classList.add("list-item-title"),i.textContent=e.getTitle();let s=d();s.addEventListener("click",g),t.appendChild(s),t.appendChild(i);let l=r();return l.addEventListener("click",m),t.appendChild(l),e.finished&&t.classList.add("finished"),t},c=()=>{s.getLists().forEach((e=>i(e)))},h=function(e){let i=this.parentNode,l=i.firstChild.firstChild.value,n=t(l),d=this.parentNode.parentNode,r=d.parentNode.firstChild.firstChild.value;s.addItem(r,l),d.insertBefore(o(n),i)},u=function(){this.previousSibling.removeAttribute("disabled"),this.previousSibling.focus()},p=function(){let e=this.parentNode.firstChild.value;s.removeList(e);let t=this.parentNode.parentNode;l().removeChild(t)},m=function(){let e=this.parentNode,t=this.previousSibling.textContent,i=this.parentNode.parentNode.parentNode.firstChild.firstChild.value;s.removeItem(i,t),this.parentNode.parentNode.removeChild(e)},g=function(){this.parentNode.classList.toggle("finished");let e=this.nextSibling.textContent,t=this.parentNode.parentNode.parentNode.firstChild.firstChild.value;s.changeFinishedItem(t,e)};return{initialRender:()=>{c(),(()=>{let t=n();t.addEventListener("submit",(function(l){let n=t.firstChild.value,d=e(n);s.addList(d),i(d)}))})()},showLists:c}})().initialRender()})();